<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>luna_stay</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>player</parentName>
  <maskName>player_mask</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>611</id>
        <kind>6</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>bessmertie</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>dir = 1;              
xspeed = 0.0;          
yspeed = 0.0;         
xmaxspeed = global.movespeed;     
ymaxspeed = 40.0;      
weight = global.playergravity;         
accel = 2.5;          
xfriction = 2.5;       
jumpHeight = global.jumpheight;     

maxDoubleJumps = 0;     
availableJumps = 0;    
canDoubleJump = false; 
canWalljump = true;   

isClimbing = false;   
isJumping = false;     
isDismounting = false; 

aiming_max = 60;     
dismount_max = 20;   
landing_max = 2;    

aiming = 0;            
dismount = 0;          
landing = 0;         

flashlight=0;
t = 0;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>eyetimer=0
double_jump=1
shuffletimer=0
if instance_exists(player) and !instance_exists(chararm)
{
instance_create(x+0,y+0,chararm)
}
eyeindex=0
wingstimer=0
eyehurt=0
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//draw memes
ycor[0, 0] = -1; xcor[0, 0] = 0;
ycor[0, 1] = 0; xcor[0, 1] = 0;
ycor[0, 2] = +1; xcor[0, 2] = 0;
ycor[0, 3] = 0; xcor[0, 3] = 0;

ycor[1, 0] = -1; xcor[1, 0] = 0;
ycor[1, 1] = 0; xcor[1, 1] = 0;
ycor[1, 2] = +1; xcor[1, 2] = 0;
ycor[1, 3] = 0; xcor[1, 3] = 0;

ycor[2, 0] = +4; xcor[2, 0] = +4;
ycor[2, 1] = +5; xcor[2, 1] = +4;
ycor[2, 2] = +6; xcor[2, 2] = +4;
ycor[2, 3] = +5; xcor[2, 3] = +4;
ycor[2, 4] = +4; xcor[2, 4] = +4;
ycor[2, 5] = +3; xcor[2, 5] = +4;
ycor[2, 6] = +2; xcor[2, 6] = +4;
ycor[2, 7] = +3; xcor[2, 7] = +4;
ycor[2, 8] = +4; xcor[2, 8] = +4;
ycor[2, 9] = +5; xcor[2, 9] = +4;
ycor[2, 10] = +6; xcor[2, 10] = +4;
ycor[2, 11] = +5; xcor[2, 11] = +4;
ycor[2, 12] = +4; xcor[2, 12] = +4;
ycor[2, 13] = +3; xcor[2, 13] = +4;
ycor[2, 14] = +2; xcor[2, 14] = +4;
ycor[2, 15] = +3; xcor[2, 15] = +4;

ycor[3, 0] = +4; xcor[3, 0] = +4;
ycor[3, 1] = +5; xcor[3, 1] = +4;
ycor[3, 2] = +6; xcor[3, 2] = +4;
ycor[3, 3] = +5; xcor[3, 3] = +4;
ycor[3, 4] = +4; xcor[3, 4] = +4;
ycor[3, 5] = +3; xcor[3, 5] = +4;
ycor[3, 6] = +2; xcor[3, 6] = +4;
ycor[3, 7] = +3; xcor[3, 7] = +4;
ycor[3, 8] = +4; xcor[3, 8] = +4;
ycor[3, 9] = +5; xcor[3, 9] = +4;
ycor[3, 10] = +6; xcor[3, 10] = +4;
ycor[3, 11] = +5; xcor[3, 11] = +4;
ycor[3, 12] = +4; xcor[3, 12] = +4;
ycor[3, 13] = +3; xcor[3, 13] = +4;
ycor[3, 14] = +2; xcor[3, 14] = +4;
ycor[3, 15] = +3; xcor[3, 15] = +4;

ycor[4, 0] = -18; xcor[4, 0] = +4;
ycor[4, 1] = -13; xcor[4, 1] = +4;
ycor[4, 2] = -12; xcor[4, 2] = +4;

ycor[5, 0] = -18; xcor[5, 0] = +4;
ycor[5, 1] = -13; xcor[5, 1] = +4;
ycor[5, 2] = -12; xcor[5, 2] = +4;

ycor[6, 0] = -1; xcor[6, 0] = 0;
ycor[6, 1] = 0; xcor[6, 1] = 0;
ycor[6, 2] = +1; xcor[6, 2] = 0;
ycor[6, 3] = 0; xcor[6, 3] = 0;

ycor[7, 0] = -1; xcor[7, 0] = 0;
ycor[7, 1] = 0; xcor[7, 1] = 0;
ycor[7, 2] = +1; xcor[7, 2] = 0;
ycor[7, 3] = 0; xcor[7, 3] = 0;

ycor[8, 0] = +4; xcor[8, 0] = -4;
ycor[8, 1] = +5; xcor[8, 1] = -4;
ycor[8, 2] = +6; xcor[8, 2] = -4;
ycor[8, 3] = +5; xcor[8, 3] = -4;
ycor[8, 4] = +4; xcor[8, 4] = -4;
ycor[8, 5] = +3; xcor[8, 5] = -4;
ycor[8, 6] = +2; xcor[8, 6] = -4;
ycor[8, 7] = +3; xcor[8, 7] = -4;
ycor[8, 8] = +4; xcor[8, 8] = -4;
ycor[8, 9] = +5; xcor[8, 9] = -4;
ycor[8, 10] = +6; xcor[8, 10] = -4;
ycor[8, 11] = +5; xcor[8, 11] = -4;
ycor[8, 12] = +4; xcor[8, 12] = -4;
ycor[8, 13] = +3; xcor[8, 13] = -4;
ycor[8, 14] = +2; xcor[8, 14] = -4;
ycor[8, 15] = +3; xcor[8, 15] = -4;

ycor[9, 0] = +4; xcor[9, 0] = -4;
ycor[9, 1] = +5; xcor[9, 1] = -4;
ycor[9, 2] = +6; xcor[9, 2] = -4;
ycor[9, 3] = +5; xcor[9, 3] = -4;
ycor[9, 4] = +4; xcor[9, 4] = -4;
ycor[9, 5] = +3; xcor[9, 5] = -4;
ycor[9, 6] = +2; xcor[9, 6] = -4;
ycor[9, 7] = +3; xcor[9, 7] = -4;
ycor[9, 8] = +4; xcor[9, 8] = -4;
ycor[9, 9] = +5; xcor[9, 9] = -4;
ycor[9, 10] = +6; xcor[9, 10] = -4;
ycor[9, 11] = +5; xcor[9, 11] = -4;
ycor[9, 12] = +4; xcor[9, 12] = -4;
ycor[9, 13] = +3; xcor[9, 13] = -4;
ycor[9, 14] = +2; xcor[9, 14] = -4;
ycor[9, 15] = +3; xcor[9, 15] = -4;

ycor[10, 0] = -18; xcor[10, 0] = -4;
ycor[10, 1] = -13; xcor[10, 1] = -4;
ycor[10, 2] = -12; xcor[10, 2] = -4;

ycor[11, 0] = -18; xcor[11, 0] = -4;
ycor[11, 1] = -13; xcor[11, 1] = -4;
ycor[11, 2] = -12; xcor[11, 2] = -4;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>eyehurt=0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Invincibility Over
bessmertie=0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>612</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if_variable</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>flashlight</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>true</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>422</id>
        <kind>1</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Image Handling

// Draw the appropriate sprites:
if ((place_meeting(x, y+1, o_blockparent))) {
  if (xspeed == 0) {
    // Idle.
    sprite_index = luna_stay;

  }
  else {
    // Running.
    if (sign(xspeed) == sign(dir)) {
      sprite_index = luna_run;
    }
    // Skidding.
    else {
      sprite_index = luna_stay;
    }
  }
}
else {
  // Jumping.
  sprite_index = luna_jump;
  if (yspeed&lt;-7) { image_index = 0; }
  if (yspeed&lt;-4 and yspeed&gt;=-7) { image_index = 1; }
  if (yspeed&lt;-2 and yspeed&gt;=-4) { image_index = 2; }
  if (abs(yspeed) &lt; 2) { image_index = 3; }
  if (yspeed&gt;2 and yspeed&lt;=4) { image_index = 4; }
  if (yspeed&gt;4 and yspeed&lt;=7) { image_index = 5; }
  if (yspeed&gt;7 ) { image_index = 6; }
}
// Landing.
if (landing &gt; 0) {
  landing -= 1;
  sprite_index = luna_stay;
}

// Configure image speeds.
image_speed = 0.5;

if (sprite_index == luna_run) {
  image_speed = 0.4;
}

if (sprite_index == luna_stay) {
  image_speed = 0.05;
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>424</id>
        <kind>2</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>421</id>
        <kind>3</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Image Handling

// Draw the appropriate sprites:
if ((place_meeting(x, y+1, o_blockparent))) {
  if (xspeed == 0) {
    // Idle.
    sprite_index = luna_stay_a;
  }
  else {
    // Running.
    if (sign(xspeed) == sign(dir)) {
      sprite_index = luna_run_a;
    }
    // Skidding.
    else {
      sprite_index = luna_stay_a;

    }
  }
}
else {
  // Jumping.
  sprite_index = luna_jump_a;
  if (yspeed&lt;-7) { image_index = 0; }
  if (yspeed&lt;-4 and yspeed&gt;=-7) { image_index = 1; }
  if (yspeed&lt;-2 and yspeed&gt;=-4) { image_index = 2; }
  if (abs(yspeed) &lt; 2) { image_index = 3; }
  if (yspeed&gt;2 and yspeed&lt;=4) { image_index = 4; }
  if (yspeed&gt;4 and yspeed&lt;=7) { image_index = 5; }
  if (yspeed&gt;7 ) { image_index = 6; }
}
// Landing.
if (landing &gt; 0) {
  landing -= 1;
  sprite_index = luna_stay_a;

}

// Configure image speeds.
image_speed = 0.5;

if (sprite_index == luna_run_a) {
  image_speed = 0.4;
}

if (sprite_index == luna_stay_a) {
  image_speed = 0.05;
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Destroy objects

instance_deactivate_all(true);
instance_activate_object(control);
instance_activate_object(superview);
instance_activate_object(background1);
instance_activate_object(particles);
instance_activate_object(lightballpar);
instance_activate_object(parbullet);
instance_activate_object(background1);
instance_activate_region(view_xview-196,view_yview-196,view_wview+260,view_hview+260,1); 
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw Head
if image_xscale&gt;0
{
ycor[0, 0] = -1; xcor[0, 0] = 0;

ycor[1, 0] = -1; xcor[1, 0] = 0;

ycor[2, 0] = +3; xcor[2, 0] = +4;
ycor[2, 1] = +3; xcor[2, 1] = +4;
ycor[2, 2] = +3; xcor[2, 2] = +4;
ycor[2, 3] = +2; xcor[2, 3] = +4;
ycor[2, 4] = +1; xcor[2, 4] = +4;
ycor[2, 5] = 0; xcor[2, 5] = +4;
ycor[2, 6] = +1; xcor[2, 6] = +4;
ycor[2, 7] = +2; xcor[2, 7] = +4;
ycor[2, 8] = +3; xcor[2, 8] = +4;
ycor[2, 9] = +3; xcor[2, 9] = +4;
ycor[2, 10] = +3; xcor[2, 10] = +4;
ycor[2, 11] = +2; xcor[2, 11] = +4;
ycor[2, 12] = +1; xcor[2, 12] = +4;
ycor[2, 13] = 0; xcor[2, 13] = +4;
ycor[2, 14] = +1; xcor[2, 14] = +4;
ycor[2, 15] = +2; xcor[2, 15] = +4;

ycor[3, 0] = +3; xcor[3, 0] = +4;
ycor[3, 1] = +3; xcor[3, 1] = +4;
ycor[3, 2] = +3; xcor[3, 2] = +4;
ycor[3, 3] = +2; xcor[3, 3] = +4;
ycor[3, 4] = +1; xcor[3, 4] = +4;
ycor[3, 5] = 0; xcor[3, 5] = +4;
ycor[3, 6] = +1; xcor[3, 6] = +4;
ycor[3, 7] = +2; xcor[3, 7] = +4;
ycor[3, 8] = +3; xcor[3, 8] = +4;
ycor[3, 9] = +3; xcor[3, 9] = +4;
ycor[3, 10] = +3; xcor[3, 10] = +4;
ycor[3, 11] = +2; xcor[3, 11] = +4;
ycor[3, 12] = +1; xcor[3, 12] = +4;
ycor[3, 13] = 0; xcor[3, 13] = +4;
ycor[3, 14] = +1; xcor[3, 14] = +4;
ycor[3, 15] = +2; xcor[3, 15] = +4;

ycor[4, 0] = -5; xcor[4, 0] = +0;
ycor[4, 1] = -5; xcor[4, 1] = +0;
ycor[4, 2] = -5; xcor[4, 2] = +0;
ycor[4, 3] = -5; xcor[4, 3] = +0;
ycor[4, 4] = -5; xcor[4, 4] = +0;
ycor[4, 5] = -5; xcor[4, 5] = +0;
ycor[4, 6] = -5; xcor[4, 6] = +0;

ycor[5, 0] = -5; xcor[5, 0] = +0;
ycor[5, 1] = -5; xcor[5, 1] = +0;
ycor[5, 2] = -5; xcor[5, 2] = +0;
ycor[5, 3] = -5; xcor[5, 3] = +0;
ycor[5, 4] = -5; xcor[5, 4] = +0;
ycor[5, 5] = -5; xcor[5, 5] = +0;
ycor[5, 6] = -5; xcor[5, 6] = +0;
}


if image_xscale&lt;0
{
ycor[0, 0] = -1; xcor[0, 0] = 0;

ycor[1, 0] = -1; xcor[1, 0] = 0;

ycor[2, 0] = +3; xcor[2, 0] = -4;
ycor[2, 1] = +3; xcor[2, 1] = -4;
ycor[2, 2] = +3; xcor[2, 2] = -4;
ycor[2, 3] = +2; xcor[2, 3] = -4;
ycor[2, 4] = +1; xcor[2, 4] = -4;
ycor[2, 5] = 0; xcor[2, 5] = -4;
ycor[2, 6] = +1; xcor[2, 6] = -4;
ycor[2, 7] = +2; xcor[2, 7] = -4;
ycor[2, 8] = +3; xcor[2, 8] = -4;
ycor[2, 9] = +3; xcor[2, 9] = -4;
ycor[2, 10] = +3; xcor[2, 10] = -4;
ycor[2, 11] = +2; xcor[2, 11] = -4;
ycor[2, 12] = +1; xcor[2, 12] = -4;
ycor[2, 13] = 0; xcor[2, 13] = -4;
ycor[2, 14] = +1; xcor[2, 14] = -4;
ycor[2, 15] = +2; xcor[2, 15] = -4;

ycor[3, 0] = +3; xcor[3, 0] = -4;
ycor[3, 1] = +3; xcor[3, 1] = -4;
ycor[3, 2] = +3; xcor[3, 2] = -4;
ycor[3, 3] = +2; xcor[3, 3] = -4;
ycor[3, 4] = +1; xcor[3, 4] = -4;
ycor[3, 5] = 0; xcor[3, 5] = -4;
ycor[3, 6] = +1; xcor[3, 6] = -4;
ycor[3, 7] = +2; xcor[3, 7] = -4;
ycor[3, 8] = +3; xcor[3, 8] = -4;
ycor[3, 9] = +3; xcor[3, 9] = -4;
ycor[3, 10] = +3; xcor[3, 10] = -4;
ycor[3, 11] = +2; xcor[3, 11] = -4;
ycor[3, 12] = +1; xcor[3, 12] = -4;
ycor[3, 13] = 0; xcor[3, 13] = -4;
ycor[3, 14] = +1; xcor[3, 14] = -4;
ycor[3, 15] = +2; xcor[3, 15] = -4;

ycor[4, 0] = -6; xcor[4, 0] = +0;
ycor[4, 1] = -5; xcor[4, 1] = +0;
ycor[4, 2] = -3; xcor[4, 2] = +0;

ycor[5, 0] = -6; xcor[5, 0] = +0;
ycor[5, 1] = -5; xcor[5, 1] = +0;
ycor[5, 2] = -3; xcor[5, 2] = +0;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_alpha=1

xspeed = iff(abs(xspeed) &gt; xmaxspeed, xmaxspeed * sign(xspeed), xspeed);
yspeed = iff(abs(yspeed) &gt; ymaxspeed, ymaxspeed * sign(yspeed), yspeed);

if (place_free(x, y + yspeed)) {
  y += yspeed;
}
else 
{
  if (yspeed &gt; 0) 
  {
    isClimbing = false;
    isJumping = false;
    isDismounting = false;
    landing = landing_max;
    dismount = dismount_max;
    wingstimer=0;
    y = floor(y);
  }
  move_contact_solid(point_direction(x, y, x, y + yspeed), yspeed);
  
  yspeed = 0;
}

if (place_free(x + xspeed, y)) {
    x += xspeed;
} 
else {
  move_contact_solid(point_direction(x, y, x + xspeed, y), xspeed);
  xspeed = 0;
}
isWallsliding = false;

if (isClimbing == false) {

  if (gamepad_button_check_pressed(0, gp_padl) || keyboard_check_pressed(ord('A')) || (keyboard_check(ord('A')) &amp;&amp; keyboard_check_released(ord('D')))) {
    dir = -1;
  }
  if (gamepad_button_check_pressed(0, gp_padr) || keyboard_check_pressed(ord('D')) || (keyboard_check(ord('D')) &amp;&amp; keyboard_check_released(ord('A')))) {
    dir = 1; 
  }
  
  if (place_free(x, y + 1)) {
    yspeed += weight;

    if ((!gamepad_button_check(0, gp_face2)) &amp;&amp; (!keyboard_check(vk_space)) &amp;&amp; isJumping &amp;&amp; (yspeed &lt; -jumpHeight / 2)) {
      yspeed = -jumpHeight / 3;
    }
  }
  else {
    availableJumps = maxDoubleJumps;
    canDoubleJump = false;
    if (gamepad_button_check_pressed(0, gp_face2) || keyboard_check_pressed(vk_space)) {
      yspeed = -jumpHeight;
      xspeed = xmaxspeed * (0 - keyboard_check(ord('A')) + keyboard_check(ord('D')));
      double_jump=1;
      isJumping = true;
    }
    }
  }
  

  if (
  keyboard_check(ord('A')) &amp;&amp; xspeed &gt; -xmaxspeed &amp;&amp; dir == -1 ||
  gamepad_button_check(0, gp_padl) &amp;&amp; xspeed &gt; -xmaxspeed &amp;&amp; dir == -1
  ) {
    xspeed -= accel;
  }
  if (
  keyboard_check(ord('D')) &amp;&amp; xspeed &lt; xmaxspeed &amp;&amp; dir == 1 ||
  gamepad_button_check(0, gp_padr)  &amp;&amp; xspeed &lt; xmaxspeed &amp;&amp; dir == 1
  ) {
    xspeed += accel;
  }
  
  if (!gamepad_button_check(0, gp_padl) &amp;&amp; !gamepad_button_check(0, gp_padr) &amp;&amp; !keyboard_check(ord('A')) &amp;&amp; !keyboard_check(ord('D'))) {
    if (abs(xspeed) &gt; xfriction) {
      xspeed -= sign(xspeed) * xfriction;
    } else {
      xspeed = 0;
    }
  }


if (gamepad_button_check_pressed(0, gp_face2))
{if (global.getwings=false)
{
if( place_free(x,y+1) &amp;&amp; double_jump = 1 )
{ 
double_jump=0;
yspeed = -jumpHeight;
xspeed = xmaxspeed * (0 - keyboard_check(ord('A')) + keyboard_check(ord('D')));

part_emitter_region(particles.Starter_Depth0,particles.Emitter4,self.x,self.x,self.y,self.y,ps_shape_rectangle,1)
part_emitter_stream(particles.Starter_Depth0,particles.Emitter4,particles.Particle4,5)
} 
}

if (global.getwings=true)
{
if( place_free(x,y+1) &amp;&amp; double_jump = 1 )
{ 
double_jump=2;
yspeed = -jumpHeight;
xspeed = xmaxspeed * (0 - keyboard_check(ord('A')) + keyboard_check(ord('D')));

part_emitter_region(particles.Starter_Depth0,particles.Emitter4,self.x,self.x,self.y,self.y,ps_shape_rectangle,1)
part_emitter_stream(particles.Starter_Depth0,particles.Emitter4,particles.Particle4,5)
} 

if( place_free(x,y+1) &amp;&amp; double_jump = 2 )
{ 
double_jump=0;
yspeed = -jumpHeight;
xspeed = xmaxspeed * (0 - keyboard_check(ord('A')) + keyboard_check(ord('D')));

part_emitter_region(particles.Starter_Depth0,particles.Emitter7,self.x,self.x,self.y,self.y,ps_shape_rectangle,1)
part_emitter_stream(particles.Starter_Depth0,particles.Emitter7,particles.Particle7,15)
} 
}
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Invincibility Frames

if bessmertie=1
{


if t &lt; 80
{

if (t&lt;=8 || t&gt;16 &amp;&amp; t&lt;=24 || t&gt;32 &amp;&amp; t&lt;=40 || t&gt;48 &amp;&amp; t&lt;=56 || t&gt;64 &amp;&amp; t&lt;=72 || t&gt;80 &amp;&amp; t&lt;=88|| t&gt;96 &amp;&amp; t&lt;=104 || t&gt;112 &amp;&amp; t&lt;=120 || t&gt;128 )
{image_alpha=0.5}
if (t&gt;8 &amp;&amp; t&lt;=16 || t&gt;24 &amp;&amp; t&lt;=32 || t&gt;40 &amp;&amp; t&lt;=48 || t&gt;56 &amp;&amp; t&lt;=64 || t&gt;72 &amp;&amp; t&lt;=80 || t&gt;88 &amp;&amp; t&lt;=96 || t&gt;104 &amp;&amp; t&lt;=112 || t&gt;120 &amp;&amp; t&lt;=128 )
{image_alpha=1}
t+=1; //counts down to when the guy stops flashing, ignoring the clumsy "alarm" feature
}
}

if bessmertie=0
{
image_alpha = 1; t=0;
}

if (flashlight=1)
{
if mouse_x&gt;x{image_xscale=1}
if mouse_x&lt;x{image_xscale=-1}
}
if (flashlight=0)
{
if dir=1{image_xscale=1}
if dir=-1{image_xscale=-1}
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Room Loader
if shuffletimer&lt;5
{
globalvar myRooms;
myRooms = ds_list_create();
ds_list_add(myRooms,l1_2);
ds_list_add(myRooms,l1_3);
ds_list_add(myRooms,l1_4);
ds_list_add(myRooms,l1_5);
ds_list_add(myRooms,l1_6);
ds_list_add(myRooms,l1_7);
ds_list_add(myRooms,l1_8);
ds_list_add(myRooms,l1_9);
ds_list_add(myRooms,l1_10);
ds_list_add(myRooms,l1_11);
ds_list_add(myRooms,l1_12);
ds_list_add(myRooms,l1_13);
ds_list_add(myRooms,l1_14);
ds_list_add(myRooms,l1_15);
ds_list_shuffle(myRooms);
}
else
{shuffletimer=5}
shuffletimer+=1

if (x&gt;room_width)
{
{
if !ds_list_empty(myRooms)
{
global.passedrooms+=1;
room_goto(ds_list_find_value(myRooms,0));
ds_list_delete(myRooms,0);
}
else
{
    show_message("No rooms left");
}
}
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Other
if global.getwings=true
{
if( place_free(x,y+1) &amp;&amp; double_jump = 0 )
{
if wingstimer&lt;30
{wingstimer+=1}
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="bubble">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>other.jump=1
yspeed = -jumpHeight*1.45;
xspeed = xmaxspeed * (0 - keyboard_check(ord('A')) + keyboard_check(ord('D')));
isJumping = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var i_off;
switch( sprite_index ) {
    case( luna_stay ): i_off = 0; break;
    case( luna_stay_a ): i_off = 1; break;
    case( luna_run ): i_off = 2; break;
    case( luna_run_a ): i_off = 3; break;
    case( luna_jump ): i_off = 4; break;
    case( luna_jump_a ): i_off = 5; break;
}

var ii = floor( image_index );

if global.getwings=true 
{
if (wingstimer&gt;0 and wingstimer&lt;=4){draw_sprite_ext(wings,0,player.x, player.y-35,image_xscale,image_yscale,0,c_white,1);}
if (wingstimer&gt;4 and wingstimer&lt;=9){draw_sprite_ext(wings,1,player.x, player.y-35,image_xscale,image_yscale,0,c_white,0.25);}
if (wingstimer&gt;9 and wingstimer&lt;=14){draw_sprite_ext(wings,2,player.x, player.y-35,image_xscale,image_yscale,0,c_white,0.50);}
if (wingstimer&gt;14 and wingstimer&lt;=17){draw_sprite_ext(wings,3,player.x, player.y-35,image_xscale,image_yscale,0,c_white,0.75);}
if (wingstimer&gt;17 and wingstimer&lt;=20){draw_sprite_ext(wings,4,player.x, player.y-35,image_xscale,image_yscale,0,c_white,1);}
if (wingstimer&gt;20 and wingstimer&lt;=22){draw_sprite_ext(wings,5,player.x, player.y-35,image_xscale,image_yscale,0,c_white,1);}
if (wingstimer&gt;22 and wingstimer&lt;=24){draw_sprite_ext(wings,6,player.x, player.y-35,image_xscale,image_yscale,0,c_white,1);}
if (wingstimer&gt;24 and wingstimer&lt;=26){draw_sprite_ext(wings,7,player.x, player.y-35,image_xscale,image_yscale,0,c_white,0.75);}
if (wingstimer&gt;26 and wingstimer&lt;=28){draw_sprite_ext(wings,8,player.x, player.y-35,image_xscale,image_yscale,0,c_white,0.50);}
if (wingstimer&gt;28 and wingstimer&lt;=30){draw_sprite_ext(wings,9,player.x, player.y-35,image_xscale,image_yscale,0,c_white,0.25);}
}


draw_self();

if eyehurt=0
{
if (flashlight=true)
{
draw_sprite_ext(luna_eyes,eyeindex,player.x + xcor[i_off, ii], player.y + ycor[i_off, ii],image_xscale,image_yscale,0,c_white,1);
if image_xscale&gt;0
{
switch (point_direction(x, y, mouse_x, mouse_y) + 45) div 22.5  {
case 16:
case 0: eyeindex = 0; break;
case 1: eyeindex = 1; break;
case 2: eyeindex = 2; break;
case 3: eyeindex = 3;  break;
case 4: eyeindex = 4; break;
case 5: eyeindex = 5; break;
case 6: eyeindex = 6; break;
case 7: eyeindex = 7;  break;
case 8: eyeindex = 8; break;
case 9: eyeindex = 9; break;
case 10: eyeindex = 10; break;
case 11: eyeindex = 11;  break;
case 12: eyeindex = 12; break;
case 13: eyeindex = 13; break;
case 14: eyeindex = 14; break;
case 15: eyeindex = 15;  break;
}
}
else
{
switch (point_direction(x, y, mouse_x, mouse_y) + 45) div 22.5  {
case 16:
case 0: eyeindex = 10; break;
case 1: eyeindex = 9; break;
case 2: eyeindex = 8; break;
case 3: eyeindex = 7;  break;
case 4: eyeindex = 6; break;
case 5: eyeindex = 5; break;
case 6: eyeindex = 4; break;
case 7: eyeindex = 3;  break;
case 8: eyeindex = 2; break;
case 9: eyeindex = 1; break;
case 10: eyeindex = 0; break;
case 11: eyeindex = 15;  break;
case 12: eyeindex = 14; break;
case 13: eyeindex = 13; break;
case 14: eyeindex = 12; break;
case 15: eyeindex = 11;  break;
}
}
}

if (flashlight=false)
{
draw_sprite_ext(luna_eyes,eyeindex,player.x + xcor[i_off, ii], player.y + ycor[i_off, ii],image_xscale,image_yscale,0,c_white,1);
if (sprite_index = luna_stay or sprite_index = luna_stay_a or sprite_index = luna_run or sprite_index = luna_run_a)
{
eyeindex=0
}
if ((sprite_index = luna_jump_a or sprite_index = luna_jump))
{
if (image_index=0) {eyeindex=3}
if (image_index=1) {eyeindex=2}
if (image_index=2) {eyeindex=1}
if (image_index=3) {eyeindex=0}
if (image_index=4) {eyeindex=16}
if (image_index=5) {eyeindex=15}
if (image_index=6) {eyeindex=14}
}
}
}
else
{
draw_sprite_ext(lunahurt_eyes,0,player.x + xcor[i_off, ii], player.y + ycor[i_off, ii],image_xscale,image_yscale,0,c_white,1);
}
draw_sprite_ext(luna_hat,0,player.x + xcor[i_off, ii], player.y + ycor[i_off, ii],image_xscale,image_yscale,0,c_white,image_alpha);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="32">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.getwings=false)
{
if( place_free(x,y+1) &amp;&amp; double_jump = 1 )
{ 
double_jump=0;
yspeed = -jumpHeight;
xspeed = xmaxspeed * (0 - keyboard_check(ord('A')) + keyboard_check(ord('D')));

a=instance_create(x,y,mparticles)
a.type=3;
} 
}

if (global.getwings=true)
{
if( place_free(x,y+1) &amp;&amp; double_jump = 1 )
{ 
double_jump=2;
yspeed = -jumpHeight;
xspeed = xmaxspeed * (0 - keyboard_check(ord('A')) + keyboard_check(ord('D')));

a=instance_create(x,y,mparticles)
a.type=3;
} 
else
if( place_free(x,y+1) &amp;&amp; double_jump = 2 )
{ 
double_jump=0;
yspeed = -jumpHeight*1.2;
xspeed = xmaxspeed * (0 - keyboard_check(ord('A')) + keyboard_check(ord('D')));

a=instance_create(x,y,mparticles)
a.type=6;
} 
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
